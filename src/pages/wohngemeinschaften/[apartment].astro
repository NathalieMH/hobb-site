---
import Layout from "../../layouts/Layout.astro";
import { getCollection } from "astro:content";
const { apartment } = Astro.params;              // e.g., "wohnung-3"
const [apt] = (await getCollection("apartments", a => a.data.slug === apartment));
const aptNo = apartment?.split("-")[1];
const rooms = await getCollection("rooms", r => r.data.apartment === aptNo);
---
<Layout title={apt?.data.title ?? "Wohngemeinschaft"}>
  <h1>{apt?.data.title ?? "Wohngemeinschaft"}</h1>
  <h2>Zimmer</h2>
  <ul>
    {rooms.map(({ data }) => (
      <li><a href={`/zimmer/${data.slug}/`}>{data.title}</a>{data.teaser ? ` â€” ${data.teaser}` : ""}</li>
    ))}
  </ul>
</Layout>
